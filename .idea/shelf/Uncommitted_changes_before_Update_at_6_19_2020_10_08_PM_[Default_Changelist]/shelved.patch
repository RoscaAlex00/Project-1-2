Index: core/src/com/crazyputting/physicsengine/Physics.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.crazyputting.physicsengine;\r\n\r\nimport com.badlogic.gdx.Gdx;\r\nimport com.badlogic.gdx.math.Vector3;\r\nimport com.crazyputting.objects.Ball;\r\nimport com.crazyputting.objects.Hole;\r\nimport com.crazyputting.objects.Terrain;\r\nimport com.crazyputting.player.Human;\r\n\r\nimport java.util.List;\r\nimport java.util.Random;\r\n\r\n\r\npublic class Physics {\r\n    public static final float TREE_RADIUS = 0.5f;\r\n    public static final float ROCK_RADIUS = 0.35f;\r\n    public static final float FIELD_SQUARE_WIDTH = 5;\r\n    public static final float WALL_LENGTH = 48.4f;\r\n    public static final float WALL_WIDTH = 2f;\r\n\r\n    protected final double SPVELOCITY = 0.20;\r\n    protected final double SPACCELERATION = 0.9;\r\n    protected final float GRAVITY = 9.81f;\r\n\r\n    private final float GOAL_TOLERANCE = 2f;\r\n    private final float WALL_POWER_LOSS = -0.80f;\r\n    private final float TREE_POWER_LOSS = -0.65f;\r\n    private final float ROCK_POWER_LOSS = -0.50f;\r\n    private final float DRAG_COEFFICIENT = 0.50f;\r\n\r\n    float dt = Gdx.graphics.getDeltaTime();\r\n\r\n    private Ball ball;\r\n    private Terrain terrain;\r\n    private PhysicsSolver solver;\r\n    private Hole hole;\r\n    private float mass;\r\n    private float radius;\r\n    private int wallHitCounter;\r\n    private int treeHitCounter;\r\n    private int rockHitCounter;\r\n    private int mazeWallHitCounter;\r\n    private Vector3 windForce;\r\n\r\n\r\n    public Physics(Ball yourBall, Terrain yourTerrain, Hole newHole, PhysicsSolver solver) {\r\n        this.ball = yourBall;\r\n        this.terrain = yourTerrain;\r\n        this.solver = solver;\r\n        solver.setPhysics(this);\r\n        this.hole = newHole;\r\n        this.radius = hole.getHoleRadius() - 0.5f;\r\n        this.mass = yourBall.getMass();\r\n        float random1 = randSmallFloat();\r\n        float random2 = randSmallFloat();\r\n        float x = (float) (Math.cos(random1 * Math.PI));\r\n        float y = (float) (Math.sin(random2 * Math.PI));\r\n        this.windForce = new Vector3(x,y,0);\r\n    }\r\n\r\n    public float getGRAVITY() {\r\n        return GRAVITY;\r\n    }\r\n\r\n    public float getDt() {\r\n        return dt;\r\n    }\r\n    protected void setDt(float dt) {\r\n        this.dt = dt;\r\n    }\r\n\r\n    private Vector3 calcGravity(Vector3 position) {\r\n        Vector3 grav = new Vector3();\r\n        grav.x = (-mass * GRAVITY * terrain.getFunction().calcXDeriv(position.x, position.y));\r\n        grav.y = (-mass * GRAVITY * terrain.getFunction().calcYDeriv(position.x, position.y));\r\n        return grav;\r\n    }\r\n\r\n    private Vector3 calcFriction(Vector3 velocity) {\r\n        Vector3 v = new Vector3(velocity);\r\n        if (v.len() != 0.0) v.scl(1 / v.len());\r\n        v.scl(-terrain.getFrictionCoefficient() * mass * GRAVITY);\r\n        return v;\r\n    }\r\n\r\n    private Vector3 calcWind(Vector3 velocity){\r\n        float windForceX =  windForce.x * 0.5f  * DRAG_COEFFICIENT\r\n                 * matPower(Ball.DIAMETER / 2.0f, 2);\r\n        float windForceY = windForce.y * 0.5f  * DRAG_COEFFICIENT\r\n                * matPower(Ball.DIAMETER / 2.0f, 2) ;\r\n        Vector3 windForceNew = new Vector3(windForceX, windForceY, 0f);\r\n        windForceNew.scl((float) (-1f*velocity.len()*Math.PI) * 5);\r\n        return windForceNew;\r\n    }\r\n\r\n    public Vector3 getAcceleration(Vector3 position, Vector3 velocity) {\r\n        Vector3 acc = calcGravity(position);\r\n        acc.add(calcFriction(velocity));\r\n        if(terrain.getWindEnabled()) {\r\n            acc.add(calcWind(velocity));\r\n        }\r\n        return acc;\r\n    }\r\n\r\n    public boolean isGoal() {\r\n        Vector3 pos = ball.getPosition().cpy();\r\n        Vector3 vel = ball.getVelocity().cpy();\r\n        Vector3 hol = hole.getPosition().cpy();\r\n        pos.z = 0f;\r\n        vel.z = 0f;\r\n        hol.z = 0f;\r\n        boolean goal = false;\r\n        if ((pos.dst(hol) < radius) && vel.len() < GOAL_TOLERANCE) {\r\n            goal = true;\r\n        }\r\n        return goal;\r\n    }\r\n\r\n    public float updateBall(float dt) {\r\n        this.dt = dt;\r\n\r\n        solver.setHit(ball.isHit());\r\n\r\n        Vector3 position = ball.getPosition().cpy();\r\n        Vector3 velocity = ball.getVelocity().cpy();\r\n        Vector3 newVel = solver.getSpeed(position.cpy(), velocity.cpy());\r\n        ball.getVelocity().set(newVel.cpy());\r\n        Vector3 newPos = solver.getPosition(position.cpy(), velocity.cpy());\r\n        ball.getPosition().set(newPos.cpy());\r\n\r\n        //Check if the ball is in sand or water\r\n        if (checkInSand(terrain.getSandCoordinates(), newPos)) {\r\n            terrain.setFrictionCoefficient(10f);\r\n        }\r\n        else {\r\n            terrain.setFrictionCoefficient(1.5f);\r\n        }\r\n\r\n        if (terrain.getFunction().evaluateHeight(newPos.x, newPos.y) <= -0.1f){\r\n            //Option 1\r\n            if (terrain.getPlayer() instanceof Human){\r\n                ball.setStopped();\r\n                ball.getPosition().set(ball.getHitPosition());\r\n                ball.update(ball.getHitPosition().z);\r\n            }\r\n            //option 2\r\n            else {\r\n                ball.setStopped();\r\n                //set the ball back a bit out of the water\r\n                Vector3 outOfWaterPos = newPos.cpy().add(position.cpy().sub(newPos.cpy()).nor().scl(3));\r\n                ball.getPosition().set(outOfWaterPos);\r\n            }\r\n            //update ball for debugging\r\n            ball.hit(new Vector3(0, 0, 0.001f));\r\n        }\r\n\r\n        updateBall(newPos, newVel);\r\n        return position.dst(newPos);\r\n    }\r\n\r\n    protected void updateBall(Vector3 position, Vector3 velocity) {\r\n        /*\r\n        Check all trees to see if the ball hits the trees.\r\n        The ball bounces off the tree in a realistic angle losing some speed.\r\n         */\r\n        for (Vector3 treeCoordinate : terrain.getTreeCoordinates()) {\r\n            //The ball collides with the tree if the next position of the ball is within the bounds of the tree.\r\n            if (ballIsCollidingWithCircle(ball, treeCoordinate, TREE_RADIUS)) {\r\n                setTreeHitCounter(getTreeHitCounter() + 1);\r\n                if (getTreeHitCounter() == 1) {\r\n                    ball.setVelocity(findReflection(ball, TREE_POWER_LOSS, findNormalOfCircleCollision(ball, treeCoordinate)));\r\n                }\r\n            }\r\n        }\r\n\r\n        /*\r\n        Check all rocks to see if the ball hits the rocks.\r\n        The ball bounces off the tree in a realistic angle losing some speed.\r\n         */\r\n        for (Vector3 rockCoordinate : terrain.getRockCoordinates()) {\r\n            if (ballIsCollidingWithCircle(ball, rockCoordinate, ROCK_RADIUS)) {\r\n                setRockHitCounter(getRockHitCounter() + 1);\r\n                if (getRockHitCounter() == 1) {\r\n                    ball.setVelocity(findReflection(ball, ROCK_POWER_LOSS, findNormalOfCircleCollision(ball, rockCoordinate)));\r\n                }\r\n            }\r\n        }\r\n\r\n        //Collisions for maze walls\r\n        if(terrain.getMazeEnabled()){\r\n            for(Vector3 mazeWallCoordinate: terrain.getMazeWallCoordinates()){\r\n                if(mazeWallCoordinate.x - WALL_WIDTH/2f <= position.x && position.x <= mazeWallCoordinate.x + WALL_WIDTH/2f\r\n                && mazeWallCoordinate.y - WALL_LENGTH/2f <= position.y && position.y <= mazeWallCoordinate.y + WALL_LENGTH/2f){\r\n                    setMazeWallHitCounter(getMazeWallHitCounter() + 1);\r\n                    if(getMazeWallHitCounter() == 1){\r\n                        // Create the four coordinates that make up the rectangle\r\n                        Vector3 a = new Vector3(mazeWallCoordinate.x - WALL_WIDTH/2f, mazeWallCoordinate.y - WALL_LENGTH/2f, mazeWallCoordinate.z);\r\n                        Vector3 b = new Vector3(mazeWallCoordinate.x - WALL_WIDTH/2f, mazeWallCoordinate.y + WALL_LENGTH/2f, mazeWallCoordinate.z);\r\n                        Vector3 c = new Vector3(mazeWallCoordinate.x + WALL_WIDTH/2f, mazeWallCoordinate.y - WALL_LENGTH/2f, mazeWallCoordinate.z);\r\n                        Vector3 d = new Vector3(mazeWallCoordinate.x + WALL_WIDTH/2f, mazeWallCoordinate.y + WALL_LENGTH/2f, mazeWallCoordinate.z);\r\n\r\n                        //Collisions with correct side\r\n                        if (ballCollidesWithLine(position, a, b) || ballCollidesWithLine(position, c, d)) {\r\n                            ball.setVelocity(findReflection(ball, WALL_POWER_LOSS, normalOfLine(a,b)));\r\n                        }\r\n                        if (ballCollidesWithLine(position, a, c) || ballCollidesWithLine(position, b, d)){\r\n                            ball.setVelocity(findReflection(ball, WALL_POWER_LOSS, normalOfLine(a,c)));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        /*\r\n        If the ball goes out of bounds (outside of the playing field),\r\n        inverse and scale the velocity on the axis of the side where it gets out of bounds.\r\n        This way it appears as if the ball bounces off the wall and losing a bit of speed.\r\n         */\r\n        if (position.x <= 0.2f || position.x >= terrain.getWidth() - 0.3f) {\r\n            setWallHitCounter(getWallHitCounter() + 1);\r\n            if (getWallHitCounter() == 1) {\r\n                Vector3 storage = new Vector3(ball.getVelocity().x * WALL_POWER_LOSS,\r\n                        ball.getVelocity().y, 0);\r\n                ball.setStopped();\r\n                ball.hit(storage);\r\n            }\r\n        }\r\n        if (position.y <= 0.2f || position.y >= terrain.getHeight() - 0.3f) {\r\n            setWallHitCounter(getWallHitCounter() + 1);\r\n            if (getWallHitCounter() == 1) {\r\n                Vector3 storage = new Vector3(ball.getVelocity().x,\r\n                        ball.getVelocity().y * WALL_POWER_LOSS, 0);\r\n                ball.setStopped();\r\n                ball.hit(storage);\r\n            }\r\n        }\r\n        if (velocity.len() < SPVELOCITY && calcGravity(position).len() < SPACCELERATION) {\r\n            ball.setStopped();\r\n        }\r\n        if (getWallHitCounter() >= 1) {\r\n            setWallHitCounter(getWallHitCounter() + 1);\r\n        }\r\n        if (getWallHitCounter() == 4) {\r\n            resetWallHitCounter();\r\n        }\r\n        if (getMazeWallHitCounter() >= 1) {\r\n            setMazeWallHitCounter(getMazeWallHitCounter() + 1);\r\n        }\r\n        if (getMazeWallHitCounter() == 7) {\r\n            resetMazeWallHitCounter();\r\n        }\r\n        if (getTreeHitCounter() >= 1) {\r\n            setTreeHitCounter(getTreeHitCounter() + 1);\r\n        }\r\n        if (getTreeHitCounter() == 15) {\r\n            resetTreeHitCounter();\r\n        }\r\n        if (getRockHitCounter() >= 1) {\r\n            setRockHitCounter(getRockHitCounter() + 1);\r\n        }\r\n        if (getRockHitCounter() == 15) {\r\n            resetRockHitCounter();\r\n        }\r\n        ball.getPosition().z = terrain.getFunction().evaluateHeight(position.x, position.y);\r\n    }\r\n\r\n    /**\r\n     * The reflection at a point can be calculated with the equation r = d - 2(d.n)*n. Where n is the normalized normal vector\r\n     * and d.n is the dot-product between the incoming vector d and n.\r\n     * <p>\r\n     * This equation can be found with the following:\r\n     * d = (d.n)*n + (d - (d.n)*n), d.n is the angle between d and n, thus is a scaled n.\r\n     * r = -(d.n)*n + (d - (d.n)*n) = d - 2(d.n)*n\r\n     * <p>\r\n     * A more detailed explanation can be found on https://math.stackexchange.com/questions/13261/how-to-get-a-reflection-vector\r\n     * and https://www.fabrizioduroni.it/2017/08/25/how-to-calculate-reflection-vector.html\r\n     */\r\n    private Vector3 findReflection(Ball ball, float powerLoss, Vector3 normal) {\r\n        Vector3 ballVelocity = ball.getVelocity().cpy();\r\n        return ballVelocity.sub(normal.scl(2 * normal.dot(ballVelocity))).scl(-powerLoss);\r\n    }\r\n\r\n    private Vector3 findNormalOfCircleCollision(Ball ball, Vector3 obstacle) {\r\n        return ball.getPosition().cpy().sub(obstacle.cpy()).nor();\r\n    }\r\n\r\n    private boolean ballIsCollidingWithCircle(Ball ball, Vector3 tree, float radius) {\r\n        float distance = ball.getPosition().dst(tree);\r\n        float ballRadius = Ball.DIAMETER / 2f;\r\n        return distance <= (ballRadius + radius);\r\n    }\r\n\r\n    private boolean ballIsInSand(Vector3 ball, Vector3 sand) {\r\n        return sand.x - FIELD_SQUARE_WIDTH / 2 <= ball.x && ball.x <= sand.x + FIELD_SQUARE_WIDTH / 2 &&\r\n                sand.y - FIELD_SQUARE_WIDTH / 2 <= ball.y && ball.y <= sand.y + FIELD_SQUARE_WIDTH / 2;\r\n    }\r\n\r\n    private boolean checkInSand(List<Vector3> sandCoordinates, Vector3 ballPos) {\r\n        for (Vector3 sandCoordinate : sandCoordinates) {\r\n            if (ballIsInSand(ballPos, sandCoordinate)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private boolean ballCollidesWithLine(Vector3 ballPos, Vector3 lineStart, Vector3 lineEnd){\r\n        float ballRadius = Ball.DIAMETER/2f;\r\n        Vector3 line = lineEnd.cpy().sub(lineStart.cpy());\r\n        float dstBallCenterToLine = Math.abs(line.y * ballPos.x - line.x * ballPos.y + lineEnd.x * lineStart.y - lineEnd.y * lineStart.x) / line.len();\r\n        return dstBallCenterToLine <= ballRadius;\r\n    }\r\n\r\n    private Vector3 normalOfLine(Vector3 lineStart, Vector3 lineEnd){\r\n        Vector3 line = lineEnd.cpy().sub(lineStart.cpy());\r\n        return line.rotate(new Vector3(0,0,1), 90).nor();\r\n    }\r\n\r\n    public int getTreeHitCounter() {\r\n        return treeHitCounter;\r\n    }\r\n    public void setTreeHitCounter(int counter) {\r\n        this.treeHitCounter = counter;\r\n    }\r\n    public void resetTreeHitCounter() {\r\n        this.treeHitCounter = 0;\r\n    }\r\n\r\n    public int getRockHitCounter() {\r\n        return rockHitCounter;\r\n    }\r\n    public void setRockHitCounter(int counter) {\r\n        this.rockHitCounter = counter;\r\n    }\r\n    public void resetRockHitCounter() {\r\n        this.rockHitCounter = 0;\r\n    }\r\n\r\n    public void setMazeWallHitCounter(int counter){\r\n        this.mazeWallHitCounter = counter;\r\n    }\r\n    public int getMazeWallHitCounter(){\r\n        return mazeWallHitCounter;\r\n    }\r\n    public void resetMazeWallHitCounter(){\r\n        this.mazeWallHitCounter = 0;\r\n    }\r\n\r\n    public int getWallHitCounter() {\r\n        return wallHitCounter;\r\n    }\r\n    public void setWallHitCounter(int counter) {\r\n        this.wallHitCounter = counter;\r\n    }\r\n    public void resetWallHitCounter() {\r\n        this.wallHitCounter = 0;\r\n    }\r\n\r\n    public float randSmallFloat() {\r\n        Random rand = new Random();\r\n        return (rand.nextFloat() * (1.5f - 0.5f) + 0.5f);\r\n    }\r\n    public float matPower(float base, int power) {\r\n        float matPower = 1f;\r\n        for (int i = 0; i < power; i++) {\r\n            matPower *= base;\r\n        }\r\n        return matPower;\r\n    }\r\n\r\n    public Vector3 getWindForce() {\r\n        return windForce;\r\n    }\r\n    public void setWindForce(Vector3 windForce1){\r\n        this.windForce = windForce1;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- core/src/com/crazyputting/physicsengine/Physics.java	(revision ef0d8f90ad98b162e99a3010244df3303d78d727)
+++ core/src/com/crazyputting/physicsengine/Physics.java	(date 1592593500682)
@@ -121,8 +121,9 @@
 
         solver.setHit(ball.isHit());
 
-        Vector3 position = ball.getPosition().cpy();
-        Vector3 velocity = ball.getVelocity().cpy();
+        Vector3 position = ball.getPosition();
+        Vector3 velocity = ball.getVelocity();
+
         Vector3 newVel = solver.getSpeed(position.cpy(), velocity.cpy());
         ball.getVelocity().set(newVel.cpy());
         Vector3 newPos = solver.getPosition(position.cpy(), velocity.cpy());
@@ -141,7 +142,6 @@
             if (terrain.getPlayer() instanceof Human){
                 ball.setStopped();
                 ball.getPosition().set(ball.getHitPosition());
-                ball.update(ball.getHitPosition().z);
             }
             //option 2
             else {
Index: core/src/com/crazyputting/states/gamestates/ThreeDimensional.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.crazyputting.states.gamestates;\r\n\r\nimport com.badlogic.gdx.Gdx;\r\nimport com.badlogic.gdx.graphics.*;\r\nimport com.badlogic.gdx.graphics.g2d.SpriteBatch;\r\nimport com.badlogic.gdx.graphics.g3d.*;\r\nimport com.badlogic.gdx.graphics.g3d.attributes.ColorAttribute;\r\nimport com.badlogic.gdx.graphics.g3d.attributes.TextureAttribute;\r\nimport com.badlogic.gdx.graphics.g3d.environment.DirectionalLight;\r\nimport com.badlogic.gdx.graphics.g3d.utils.ModelBuilder;\r\nimport com.badlogic.gdx.math.Vector3;\r\nimport com.badlogic.gdx.scenes.scene2d.Stage;\r\nimport com.badlogic.gdx.scenes.scene2d.ui.Image;\r\nimport com.badlogic.gdx.utils.Array;\r\nimport com.badlogic.gdx.utils.viewport.FitViewport;\r\nimport com.crazyputting.CrazyPutting;\r\nimport com.crazyputting.camera.GameCamera;\r\nimport com.crazyputting.managers.GameStateManager;\r\nimport com.crazyputting.threedimensional.HeightField;\r\nimport com.crazyputting.threedimensional.ThreeDimensionalModel;\r\nimport com.crazyputting.objects.Ball;\r\nimport com.crazyputting.objects.Terrain;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic abstract class ThreeDimensional extends GameState {\r\n    public GameCamera controller;\r\n    protected PerspectiveCamera camera;\r\n    protected ArrayList<ModelInstance> instances = new ArrayList<>();\r\n    protected Terrain terrain;\r\n    protected Ball ball;\r\n    private ModelBatch batch;\r\n    private Color bgColor = new Color(.8f, .8f, .8f, 1f);\r\n    private Environment environment;\r\n    private ThreeDimensionalModel threeDimensionalModel;\r\n    private Array<Renderable> fields;\r\n    private SpriteBatch back;\r\n    private Stage stage;\r\n    private Texture img;\r\n    private Image background;\r\n    private List<Vector3> sandCoords;\r\n\r\n    private boolean current = false;\r\n\r\n    public ThreeDimensional(GameStateManager manager, Terrain terrain) {\r\n        super(manager, terrain);\r\n    }\r\n\r\n    public void init() {\r\n        back = new SpriteBatch();\r\n        stage = new Stage(new FitViewport(CrazyPutting.width, CrazyPutting.height, CrazyPutting.cam), back);\r\n        img = new Texture(\"newGame.png\");\r\n        background = new Image(img);\r\n        sandCoords = new ArrayList<>();\r\n\r\n        batch = new ModelBatch();\r\n\r\n        camera = new PerspectiveCamera(80, Gdx.graphics.getWidth(), Gdx.graphics.getHeight());\r\n        camera.position.set(10f, 0f, 12f);\r\n        camera.lookAt(10, 10, 0);\r\n        camera.near = 0.1f;\r\n        camera.far = 100f;\r\n        camera.update();\r\n\r\n        Gdx.input.setInputProcessor(controller = new GameCamera(camera));\r\n\r\n        DirectionalLight light = new DirectionalLight();\r\n        light.set(.95f, .95f, .95f, -1f, -1f, -1f);\r\n\r\n        environment = new Environment();\r\n        environment.clear();\r\n        environment.set(new ColorAttribute(ColorAttribute.AmbientLight, 0.3f, 0.3f, 0.3f, 1.f));\r\n        environment.add(light);\r\n\r\n        createTerrain();\r\n    }\r\n\r\n    public void render(final ArrayList<ModelInstance> instances) {\r\n        batch.begin(camera);\r\n        if (instances != null) batch.render(instances, environment);\r\n        if (current) batch.render((RenderableProvider) environment);\r\n        else for (Renderable r : fields) batch.render(r);\r\n        batch.render(threeDimensionalModel.getEdges(), environment);\r\n        batch.render(threeDimensionalModel.getWater(), environment);\r\n        batch.render(threeDimensionalModel.getBallModel(), environment);\r\n        if (!terrain.getMazeEnabled()) {\r\n            batch.render(threeDimensionalModel.getTree(), environment);\r\n            batch.render(threeDimensionalModel.getRock(), environment);\r\n        } else {\r\n            batch.render(threeDimensionalModel.getMaze(), environment);\r\n        }\r\n        batch.end();\r\n    }\r\n\r\n    public void draw() throws IllegalAccessException {\r\n        controller.update();\r\n        stage.addActor(background);\r\n\r\n        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT | GL20.GL_DEPTH_BUFFER_BIT);\r\n        Gdx.gl.glClearColor(bgColor.r, bgColor.g, bgColor.b, bgColor.a);\r\n        stage.act();\r\n        stage.draw();\r\n\r\n        update(Gdx.graphics.getDeltaTime());\r\n        render(instances);\r\n    }\r\n\r\n    @Override\r\n    public void dispose() {\r\n        batch.dispose();\r\n    }\r\n\r\n    public void createTerrain() {\r\n        this.terrain = super.terrain;\r\n        threeDimensionalModel = new ThreeDimensionalModel(terrain);\r\n        Array<HeightField> hf = threeDimensionalModel.map;\r\n\r\n        fields = new Array<>();\r\n        for (int i = 0; i < hf.size; i++) {\r\n            Renderable field = new Renderable();\r\n            field.environment = environment;\r\n            field.meshPart.mesh = hf.get(i).mesh;\r\n            field.meshPart.primitiveType = GL20.GL_TRIANGLES;\r\n            field.meshPart.offset = 0;\r\n            field.meshPart.size = hf.get(i).mesh.getNumIndices();\r\n            field.meshPart.update();\r\n            if (!terrain.getMazeEnabled()) {\r\n                if (Math.random() <= 0.90) {\r\n                    field.material = new Material(TextureAttribute.createDiffuse(new Texture(\"grass.jpg\")));\r\n                } else {\r\n                    float x = field.meshPart.center.x;\r\n                    float y = field.meshPart.center.y;\r\n                    sandCoords.add(new Vector3(x, y, 0));\r\n                    field.material = new Material(TextureAttribute.createDiffuse(new Texture(\"sand.jpg\")));\r\n                    terrain.setSandCoordinates(sandCoords);\r\n                }\r\n            } else {\r\n                field.material = new Material(TextureAttribute.createDiffuse(new Texture(\"grass.jpg\")));\r\n            }\r\n            fields.add(field);\r\n        }\r\n    }\r\n\r\n\r\n    public void update(float dt) throws IllegalAccessException {\r\n        camera.update();\r\n    }\r\n\r\n    public PerspectiveCamera getCamera() {\r\n        return camera;\r\n    }\r\n\r\n    public Terrain getTerrain() {\r\n        return terrain;\r\n    }\r\n\r\n}\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- core/src/com/crazyputting/states/gamestates/ThreeDimensional.java	(revision ef0d8f90ad98b162e99a3010244df3303d78d727)
+++ core/src/com/crazyputting/states/gamestates/ThreeDimensional.java	(date 1592592350458)
@@ -126,7 +126,9 @@
             field.meshPart.size = hf.get(i).mesh.getNumIndices();
             field.meshPart.update();
             if (!terrain.getMazeEnabled()) {
-                if (Math.random() <= 0.90) {
+                Vector3 ballStartPos = terrain.getStartPos();
+                if (Math.random() <= 0.90 || field.meshPart.center.x - 2.5f <= ballStartPos.x  && ballStartPos.x <= field.meshPart.center.x
+                        + 2.5f && field.meshPart.center.y - 2.5f <= ballStartPos.y && ballStartPos.y <= field.meshPart.center.y + 2.5f) {
                     field.material = new Material(TextureAttribute.createDiffuse(new Texture("grass.jpg")));
                 } else {
                     float x = field.meshPart.center.x;
Index: core/src/com/crazyputting/objects/Ball.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.crazyputting.objects;\r\n\r\nimport com.badlogic.gdx.graphics.Texture;\r\nimport com.badlogic.gdx.graphics.VertexAttributes;\r\nimport com.badlogic.gdx.graphics.g3d.Material;\r\nimport com.badlogic.gdx.graphics.g3d.Model;\r\nimport com.badlogic.gdx.graphics.g3d.ModelInstance;\r\nimport com.badlogic.gdx.graphics.g3d.attributes.TextureAttribute;\r\nimport com.badlogic.gdx.graphics.g3d.utils.ModelBuilder;\r\nimport com.badlogic.gdx.math.MathUtils;\r\nimport com.badlogic.gdx.math.Quaternion;\r\nimport com.badlogic.gdx.math.Vector3;\r\n\r\n\r\npublic class Ball {\r\n    public static final float DIAMETER = 0.62f; //in meters\r\n\r\n    private final Texture TEXTURE = new Texture(\"ball.jpg\");\r\n    private Vector3 position;\r\n    private boolean stopped = false;\r\n    private boolean isHit = false;\r\n    private Vector3 velocity;\r\n    private ModelInstance ball;\r\n    private Vector3 hitPosition;\r\n\r\n    public Ball(Vector3 initPosition) {\r\n        position = initPosition.cpy();\r\n        this.hitPosition = initPosition.cpy();\r\n        velocity = new Vector3(0, 0, 0);\r\n        ballModelCreator();\r\n    }\r\n\r\n    public void hit(Vector3 initialHit) {\r\n        this.hitPosition = position.cpy();\r\n        this.stopped = false;\r\n        this.isHit = true;\r\n        this.velocity = initialHit.cpy();\r\n    }\r\n\r\n    public void update(float z) {\r\n        position.z = z - (DIAMETER / 2);\r\n        ball.transform.setTranslation(position);\r\n    }\r\n\r\n    private void ballModelCreator() {\r\n        ModelBuilder builder = new ModelBuilder();\r\n        Model sphere = builder.createSphere(DIAMETER, DIAMETER, DIAMETER, 50, 50,\r\n                new Material(TextureAttribute.createDiffuse(TEXTURE)),\r\n                VertexAttributes.Usage.Position | VertexAttributes.Usage.Normal | VertexAttributes.Usage.TextureCoordinates\r\n        );\r\n        ball = new ModelInstance(sphere, position.x, position.y, position.z + (DIAMETER / 2));\r\n    }\r\n\r\n    public void setStopped() {\r\n        velocity.set(0, 0, 0);\r\n        this.isHit = false;\r\n        this.stopped = true;\r\n    }\r\n\r\n    public void updateInstance(float z, float displacement) {\r\n        position.z = z + (DIAMETER / 2);\r\n        ball.transform.setTranslation(position);\r\n        Vector3 temp = new Vector3();\r\n        final float speed = velocity.len();\r\n        final float angle = speed * displacement * MathUtils.radiansToDegrees;\r\n        Vector3 axis = temp.set(velocity).scl(-1f / speed).scl(displacement).crs(Vector3.Z);\r\n        if (speed > 0.2f) {\r\n            ball.transform.rotate(new Quaternion(axis, angle / 50));\r\n        }\r\n    }\r\n\r\n    public float getMass() {\r\n        //in kilograms\r\n        return 0.15f;\r\n    }\r\n\r\n\r\n    public boolean isStopped() {\r\n        return stopped;\r\n    }\r\n\r\n    public boolean isHit() {\r\n        return isHit;\r\n    }\r\n\r\n    public Vector3 getVelocity() {\r\n        return velocity;\r\n    }\r\n    public void setVelocity(Vector3 newVelocity) {\r\n        this.velocity = newVelocity;\r\n    }\r\n\r\n    public Vector3 getPosition() {\r\n        return position;\r\n    }\r\n    public void setPosition(Vector3 pos) {\r\n        this.position = pos;\r\n    }\r\n\r\n    public ModelInstance getModel() {\r\n        return ball;\r\n    }\r\n\r\n    public void setPositionToHit() {\r\n        this.position.set(hitPosition);\r\n    }\r\n\r\n    public Vector3 getHitPosition(){\r\n        return this.hitPosition;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- core/src/com/crazyputting/objects/Ball.java	(revision ef0d8f90ad98b162e99a3010244df3303d78d727)
+++ core/src/com/crazyputting/objects/Ball.java	(date 1592593197724)
@@ -65,7 +65,7 @@
         final float angle = speed * displacement * MathUtils.radiansToDegrees;
         Vector3 axis = temp.set(velocity).scl(-1f / speed).scl(displacement).crs(Vector3.Z);
         if (speed > 0.2f) {
-            ball.transform.rotate(new Quaternion(axis, angle / 50));
+            ball.transform.rotate(new Quaternion(axis, angle/50));
         }
     }
 
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"BranchesTreeState\">\r\n    <expand>\r\n      <path>\r\n        <item name=\"ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n        <item name=\"LOCAL_ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n      </path>\r\n      <path>\r\n        <item name=\"ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n        <item name=\"REMOTE_ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n      </path>\r\n      <path>\r\n        <item name=\"ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n        <item name=\"REMOTE_ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n        <item name=\"GROUP_NODE:origin\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n      </path>\r\n    </expand>\r\n    <select />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"8f2b995d-3fd3-4cd5-81e0-99edc8c0e739\" name=\"Default Changelist\" comment=\"Ball or Hole can't spawn in water\">\r\n      <change afterPath=\"$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/states/menus/CreatorMenu$1$2.class\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.gradle/5.4.1/executionHistory/executionHistory.bin\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.gradle/5.4.1/executionHistory/executionHistory.bin\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.gradle/5.4.1/executionHistory/executionHistory.lock\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.gradle/5.4.1/executionHistory/executionHistory.lock\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.gradle/5.4.1/fileHashes/fileHashes.bin\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.gradle/5.4.1/fileHashes/fileHashes.bin\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.gradle/5.4.1/fileHashes/fileHashes.lock\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.gradle/5.4.1/fileHashes/fileHashes.lock\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.gradle/5.4.1/fileHashes/resourceHashesCache.bin\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.gradle/5.4.1/fileHashes/resourceHashesCache.bin\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.gradle/5.4.1/javaCompile/classAnalysis.bin\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.gradle/5.4.1/javaCompile/classAnalysis.bin\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.gradle/5.4.1/javaCompile/jarAnalysis.bin\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.gradle/5.4.1/javaCompile/jarAnalysis.bin\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.gradle/5.4.1/javaCompile/javaCompile.lock\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.gradle/5.4.1/javaCompile/javaCompile.lock\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.gradle/5.4.1/javaCompile/taskHistory.bin\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.gradle/5.4.1/javaCompile/taskHistory.bin\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.gradle/buildOutputCleanup/buildOutputCleanup.lock\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.gradle/buildOutputCleanup/buildOutputCleanup.lock\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/compiler.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/compiler.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/misc.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/misc.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/CrazyPutting.class\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/CrazyPutting.class\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/objects/Ball.class\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/objects/Ball.class\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/objects/Terrain.class\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/objects/Terrain.class\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/physicsengine/Physics.class\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/physicsengine/Physics.class\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/player/AI/AI.class\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/player/AI/AI.class\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/player/astar/AStar.class\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/player/astar/AStar.class\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/player/astar/Node.class\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/player/astar/Node.class\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/states/menus/CreatorMenu$1.class\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/states/menus/CreatorMenu$1.class\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/states/menus/CreatorMenu.class\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/states/menus/CreatorMenu.class\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/threedimensional/ThreeDimensionalModel.class\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/threedimensional/ThreeDimensionalModel.class\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/core/build/libs/core-1.0.jar\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/core/build/libs/core-1.0.jar\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/core/src/com/crazyputting/states/menus/CreatorMenu.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/core/src/com/crazyputting/states/menus/CreatorMenu.java\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"ExternalProjectsData\">\r\n    <projectState path=\"$PROJECT_DIR$\">\r\n      <ProjectState />\r\n    </projectState>\r\n  </component>\r\n  <component name=\"ExternalProjectsManager\">\r\n    <system id=\"GRADLE\">\r\n      <state>\r\n        <projects_view>\r\n          <tree_state>\r\n            <expand />\r\n            <select />\r\n          </tree_state>\r\n        </projects_view>\r\n      </state>\r\n    </system>\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"Class\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n    <option name=\"UPDATE_TYPE\" value=\"MERGE\" />\r\n  </component>\r\n  <component name=\"ProjectId\" id=\"1caDnFrKheRMt9TCHioxb4y6wK5\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">\r\n    <property name=\"RunOnceActivity.OpenProjectViewOnStart\" value=\"true\" />\r\n    <property name=\"RunOnceActivity.ShowReadmeOnStart\" value=\"true\" />\r\n    <property name=\"SHARE_PROJECT_CONFIGURATION_FILES\" value=\"true\" />\r\n    <property name=\"WebServerToolWindowFactoryState\" value=\"false\" />\r\n    <property name=\"aspect.path.notification.shown\" value=\"true\" />\r\n    <property name=\"last_opened_file_path\" value=\"$PROJECT_DIR$/core/assets\" />\r\n    <property name=\"project.structure.last.edited\" value=\"SDKs\" />\r\n    <property name=\"project.structure.proportion\" value=\"0.0\" />\r\n    <property name=\"project.structure.side.proportion\" value=\"0.2\" />\r\n  </component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"MoveFile.RECENT_KEYS\">\r\n      <recent name=\"C:\\Users\\Alex\\Desktop\\Game\\core\\assets\" />\r\n    </key>\r\n    <key name=\"CopyFile.RECENT_KEYS\">\r\n      <recent name=\"C:\\Users\\Alex\\Desktop\\Game\\core\\assets\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"RunManager\">\r\n    <configuration name=\"DesktopLauncher\" type=\"Application\" factoryName=\"Application\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <option name=\"ALTERNATIVE_JRE_PATH\" value=\"12\" />\r\n      <option name=\"ALTERNATIVE_JRE_PATH_ENABLED\" value=\"true\" />\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"com.crazyputting.desktop.DesktopLauncher\" />\r\n      <module name=\"Game.desktop.main\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"com.crazyputting.desktop.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <recent_temporary>\r\n      <list>\r\n        <item itemvalue=\"Application.DesktopLauncher\" />\r\n      </list>\r\n    </recent_temporary>\r\n  </component>\r\n  <component name=\"SvnConfiguration\">\r\n    <configuration />\r\n  </component>\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"8f2b995d-3fd3-4cd5-81e0-99edc8c0e739\" name=\"Default Changelist\" comment=\"\" />\r\n      <created>1590757976085</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1590757976085</updated>\r\n      <workItem from=\"1590757979761\" duration=\"93000\" />\r\n      <workItem from=\"1591372974279\" duration=\"274000\" />\r\n      <workItem from=\"1591534535920\" duration=\"2078000\" />\r\n      <workItem from=\"1591537282229\" duration=\"419000\" />\r\n      <workItem from=\"1591550544434\" duration=\"1425000\" />\r\n      <workItem from=\"1591552029374\" duration=\"15000\" />\r\n      <workItem from=\"1591552147487\" duration=\"987000\" />\r\n      <workItem from=\"1591553221387\" duration=\"940000\" />\r\n      <workItem from=\"1591554203732\" duration=\"668000\" />\r\n      <workItem from=\"1591555059566\" duration=\"578000\" />\r\n      <workItem from=\"1591555672636\" duration=\"139000\" />\r\n      <workItem from=\"1591956839176\" duration=\"1035000\" />\r\n      <workItem from=\"1592042954993\" duration=\"2198000\" />\r\n      <workItem from=\"1592055333391\" duration=\"3460000\" />\r\n      <workItem from=\"1592059657319\" duration=\"28000\" />\r\n      <workItem from=\"1592059966619\" duration=\"367000\" />\r\n      <workItem from=\"1592060447698\" duration=\"1016000\" />\r\n      <workItem from=\"1592061492961\" duration=\"54000\" />\r\n      <workItem from=\"1592061637525\" duration=\"823000\" />\r\n      <workItem from=\"1592063052727\" duration=\"1763000\" />\r\n      <workItem from=\"1592066653021\" duration=\"72000\" />\r\n      <workItem from=\"1592067046808\" duration=\"2448000\" />\r\n      <workItem from=\"1592131494415\" duration=\"449000\" />\r\n      <workItem from=\"1592145145913\" duration=\"4893000\" />\r\n      <workItem from=\"1592164579153\" duration=\"5488000\" />\r\n      <workItem from=\"1592221754164\" duration=\"190000\" />\r\n      <workItem from=\"1592221968217\" duration=\"259000\" />\r\n      <workItem from=\"1592222315104\" duration=\"279000\" />\r\n      <workItem from=\"1592223704099\" duration=\"1351000\" />\r\n      <workItem from=\"1592228192124\" duration=\"7646000\" />\r\n      <workItem from=\"1592237077343\" duration=\"3883000\" />\r\n      <workItem from=\"1592241982983\" duration=\"726000\" />\r\n      <workItem from=\"1592339594641\" duration=\"4069000\" />\r\n      <workItem from=\"1592344722642\" duration=\"860000\" />\r\n      <workItem from=\"1592394593015\" duration=\"1908000\" />\r\n      <workItem from=\"1592431644009\" duration=\"197000\" />\r\n      <workItem from=\"1592470813919\" duration=\"1202000\" />\r\n      <workItem from=\"1592473912073\" duration=\"577000\" />\r\n      <workItem from=\"1592500020216\" duration=\"8709000\" />\r\n      <workItem from=\"1592517303675\" duration=\"1355000\" />\r\n      <workItem from=\"1592583209124\" duration=\"2710000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"Vector3 for treeCoordinates and collider improvement\">\r\n      <created>1592131218032</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1592131218032</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00002\" summary=\"Vector3 for treeCoordinates and collider improvement\">\r\n      <created>1592131257852</created>\r\n      <option name=\"number\" value=\"00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1592131257852</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00003\" summary=\"Vector3 for treeCoordinates and collider improvement\">\r\n      <created>1592131917793</created>\r\n      <option name=\"number\" value=\"00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1592131917793</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00004\" summary=\"Collider kind of improvement\">\r\n      <created>1592150026906</created>\r\n      <option name=\"number\" value=\"00004\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00004\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1592150026907</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00005\" summary=\"coll update\">\r\n      <created>1592170061270</created>\r\n      <option name=\"number\" value=\"00005\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00005\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1592170061270</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00006\" summary=\"add spline class\">\r\n      <created>1592221925190</created>\r\n      <option name=\"number\" value=\"00006\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00006\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1592221925190</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00007\" summary=\"add spline class\">\r\n      <created>1592222104567</created>\r\n      <option name=\"number\" value=\"00007\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00007\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1592222104567</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00008\" summary=\"FIX COLLIDERS FINALLY\">\r\n      <created>1592231974656</created>\r\n      <option name=\"number\" value=\"00008\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00008\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1592231974656</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00009\" summary=\"naming + fix conflicts\">\r\n      <created>1592233277624</created>\r\n      <option name=\"number\" value=\"00009\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00009\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1592233277624</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00010\" summary=\"ball rotates but not final\">\r\n      <created>1592345563079</created>\r\n      <option name=\"number\" value=\"00010\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00010\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1592345563079</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00011\" summary=\"rocks now have random rotation + fixes\">\r\n      <created>1592431569436</created>\r\n      <option name=\"number\" value=\"00011\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00011\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1592431569436</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00012\" summary=\"Add wind,windAi,maze + collisions,checkboxes\">\r\n      <created>1592508722457</created>\r\n      <option name=\"number\" value=\"00012\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00012\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1592508722457</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"13\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"2\" />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State />\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n    <option name=\"oldMeFiltersMigrated\" value=\"true\" />\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <MESSAGE value=\"add water and change walls to wood\" />\r\n    <MESSAGE value=\"Vector3 for treeCoordinates and collider improvement\" />\r\n    <MESSAGE value=\"Collider kind of improvement\" />\r\n    <MESSAGE value=\"coll update\" />\r\n    <MESSAGE value=\"add spline class\" />\r\n    <MESSAGE value=\"FIX COLLIDERS FINALLY\" />\r\n    <MESSAGE value=\"naming + fix conflicts\" />\r\n    <MESSAGE value=\"ball rotates but not final\" />\r\n    <MESSAGE value=\"naming\" />\r\n    <MESSAGE value=\"rocks now have random rotation + fixes\" />\r\n    <MESSAGE value=\"Add wind,windAi,maze + collisions,checkboxes\" />\r\n    <MESSAGE value=\"Ball or Hole can't spawn in water\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"Ball or Hole can't spawn in water\" />\r\n  </component>\r\n  <component name=\"WindowStateProjectService\">\r\n    <state x=\"657\" y=\"139\" key=\"#DesktopLauncher\" timestamp=\"1592583234908\">\r\n      <screen x=\"0\" y=\"0\" width=\"1920\" height=\"1040\" />\r\n    </state>\r\n    <state x=\"526\" y=\"110\" key=\"#DesktopLauncher/0.0.1536.824@0.0.1536.824\" timestamp=\"1592429634028\" />\r\n    <state x=\"657\" y=\"139\" key=\"#DesktopLauncher/0.0.1920.1040@0.0.1920.1040\" timestamp=\"1592583234908\" />\r\n    <state x=\"440\" y=\"94\" key=\"#Project_Structure\" timestamp=\"1592055341187\">\r\n      <screen x=\"0\" y=\"0\" width=\"1920\" height=\"1040\" />\r\n    </state>\r\n    <state x=\"440\" y=\"94\" key=\"#Project_Structure/0.0.1920.1040@0.0.1920.1040\" timestamp=\"1592055341187\" />\r\n    <state x=\"223\" y=\"68\" key=\"#com.intellij.execution.impl.EditConfigurationsDialog\" timestamp=\"1590757998511\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state x=\"223\" y=\"68\" key=\"#com.intellij.execution.impl.EditConfigurationsDialog/0.0.1536.824@0.0.1536.824\" timestamp=\"1590757998511\" />\r\n    <state x=\"1167\" y=\"428\" key=\"#com.intellij.fileTypes.FileTypeChooser\" timestamp=\"1592055453428\">\r\n      <screen x=\"0\" y=\"0\" width=\"1920\" height=\"1040\" />\r\n    </state>\r\n    <state x=\"1167\" y=\"428\" key=\"#com.intellij.fileTypes.FileTypeChooser/0.0.1920.1040@0.0.1920.1040\" timestamp=\"1592055453428\" />\r\n    <state x=\"574\" y=\"123\" key=\"#com.intellij.ide.util.MemberChooser\" timestamp=\"1592221839369\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state x=\"574\" y=\"123\" key=\"#com.intellij.ide.util.MemberChooser/0.0.1536.824@0.0.1536.824\" timestamp=\"1592221839369\" />\r\n    <state x=\"418\" y=\"339\" key=\"#com.intellij.refactoring.move.MoveHandler.SelectRefactoringDialog\" timestamp=\"1591537523631\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state x=\"418\" y=\"339\" key=\"#com.intellij.refactoring.move.MoveHandler.SelectRefactoringDialog/0.0.1536.824@0.0.1536.824\" timestamp=\"1591537523631\" />\r\n    <state x=\"298\" y=\"0\" key=\"#com.intellij.refactoring.rename.AutomaticRenamingDialog\" timestamp=\"1591536437658\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state x=\"298\" y=\"0\" key=\"#com.intellij.refactoring.rename.AutomaticRenamingDialog/0.0.1536.824@0.0.1536.824\" timestamp=\"1591536437658\" />\r\n    <state x=\"650\" y=\"17\" key=\"CommitChangelistDialog2\" timestamp=\"1592508720799\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state x=\"650\" y=\"17\" key=\"CommitChangelistDialog2/0.0.1536.824@0.0.1536.824\" timestamp=\"1592508720799\" />\r\n    <state x=\"549\" y=\"168\" key=\"FileChooserDialogImpl\" timestamp=\"1591555636999\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state x=\"549\" y=\"168\" key=\"FileChooserDialogImpl/0.0.1536.824@0.0.1536.824\" timestamp=\"1591555636999\" />\r\n    <state width=\"1877\" height=\"236\" key=\"GridCell.Tab.0.bottom\" timestamp=\"1592585918766\">\r\n      <screen x=\"0\" y=\"0\" width=\"1920\" height=\"1040\" />\r\n    </state>\r\n    <state width=\"1493\" height=\"210\" key=\"GridCell.Tab.0.bottom/0.0.1536.824@0.0.1536.824\" timestamp=\"1592518658895\" />\r\n    <state width=\"1877\" height=\"236\" key=\"GridCell.Tab.0.bottom/0.0.1920.1040@0.0.1920.1040\" timestamp=\"1592585918766\" />\r\n    <state width=\"1877\" height=\"236\" key=\"GridCell.Tab.0.center\" timestamp=\"1592585918766\">\r\n      <screen x=\"0\" y=\"0\" width=\"1920\" height=\"1040\" />\r\n    </state>\r\n    <state width=\"1493\" height=\"210\" key=\"GridCell.Tab.0.center/0.0.1536.824@0.0.1536.824\" timestamp=\"1592518658894\" />\r\n    <state width=\"1877\" height=\"236\" key=\"GridCell.Tab.0.center/0.0.1920.1040@0.0.1920.1040\" timestamp=\"1592585918766\" />\r\n    <state width=\"1877\" height=\"236\" key=\"GridCell.Tab.0.left\" timestamp=\"1592585918766\">\r\n      <screen x=\"0\" y=\"0\" width=\"1920\" height=\"1040\" />\r\n    </state>\r\n    <state width=\"1493\" height=\"210\" key=\"GridCell.Tab.0.left/0.0.1536.824@0.0.1536.824\" timestamp=\"1592518658894\" />\r\n    <state width=\"1877\" height=\"236\" key=\"GridCell.Tab.0.left/0.0.1920.1040@0.0.1920.1040\" timestamp=\"1592585918766\" />\r\n    <state width=\"1877\" height=\"236\" key=\"GridCell.Tab.0.right\" timestamp=\"1592585918766\">\r\n      <screen x=\"0\" y=\"0\" width=\"1920\" height=\"1040\" />\r\n    </state>\r\n    <state width=\"1493\" height=\"210\" key=\"GridCell.Tab.0.right/0.0.1536.824@0.0.1536.824\" timestamp=\"1592518658895\" />\r\n    <state width=\"1877\" height=\"236\" key=\"GridCell.Tab.0.right/0.0.1920.1040@0.0.1920.1040\" timestamp=\"1592585918766\" />\r\n    <state width=\"1493\" height=\"261\" key=\"GridCell.Tab.1.bottom\" timestamp=\"1592431594192\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state width=\"1493\" height=\"261\" key=\"GridCell.Tab.1.bottom/0.0.1536.824@0.0.1536.824\" timestamp=\"1592431594192\" />\r\n    <state width=\"1493\" height=\"261\" key=\"GridCell.Tab.1.center\" timestamp=\"1592431594191\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state width=\"1493\" height=\"261\" key=\"GridCell.Tab.1.center/0.0.1536.824@0.0.1536.824\" timestamp=\"1592431594191\" />\r\n    <state width=\"1493\" height=\"261\" key=\"GridCell.Tab.1.left\" timestamp=\"1592431594191\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state width=\"1493\" height=\"261\" key=\"GridCell.Tab.1.left/0.0.1536.824@0.0.1536.824\" timestamp=\"1592431594191\" />\r\n    <state width=\"1493\" height=\"261\" key=\"GridCell.Tab.1.right\" timestamp=\"1592431594192\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state width=\"1493\" height=\"261\" key=\"GridCell.Tab.1.right/0.0.1536.824@0.0.1536.824\" timestamp=\"1592431594192\" />\r\n    <state x=\"481\" y=\"129\" key=\"MultipleFileMergeDialog\" timestamp=\"1592471588331\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state x=\"481\" y=\"129\" key=\"MultipleFileMergeDialog/0.0.1536.824@0.0.1536.824\" timestamp=\"1592471588331\" />\r\n    <state x=\"361\" y=\"146\" key=\"Vcs.Push.Dialog.v2\" timestamp=\"1592508728030\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state x=\"361\" y=\"146\" key=\"Vcs.Push.Dialog.v2/0.0.1536.824@0.0.1536.824\" timestamp=\"1592508728030\" />\r\n    <state x=\"451\" y=\"184\" key=\"Vcs.Push.Dialog.v2/0.0.1920.1040@0.0.1920.1040\" timestamp=\"1592345564710\" />\r\n    <state x=\"465\" y=\"238\" key=\"com.intellij.ide.util.TipDialog\" timestamp=\"1592517310700\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state x=\"465\" y=\"238\" key=\"com.intellij.ide.util.TipDialog/0.0.1536.824@0.0.1536.824\" timestamp=\"1592517310700\" />\r\n    <state x=\"578\" y=\"330\" key=\"com.intellij.openapi.vcs.update.UpdateOrStatusOptionsDialogupdate-v2\" timestamp=\"1592508664104\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state x=\"578\" y=\"330\" key=\"com.intellij.openapi.vcs.update.UpdateOrStatusOptionsDialogupdate-v2/0.0.1536.824@0.0.1536.824\" timestamp=\"1592508664104\" />\r\n    <state x=\"499\" y=\"179\" key=\"extract.method.dialog\" timestamp=\"1592146536896\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state x=\"499\" y=\"179\" key=\"extract.method.dialog/0.0.1536.824@0.0.1536.824\" timestamp=\"1592146536896\" />\r\n    <state x=\"425\" y=\"187\" key=\"run.anything.popup\" timestamp=\"1592237562874\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state x=\"425\" y=\"187\" key=\"run.anything.popup/0.0.1536.824@0.0.1536.824\" timestamp=\"1592237562874\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/workspace.xml	(revision ef0d8f90ad98b162e99a3010244df3303d78d727)
+++ .idea/workspace.xml	(date 1592593638517)
@@ -20,32 +20,23 @@
   </component>
   <component name="ChangeListManager">
     <list default="true" id="8f2b995d-3fd3-4cd5-81e0-99edc8c0e739" name="Default Changelist" comment="Ball or Hole can't spawn in water">
-      <change afterPath="$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/states/menus/CreatorMenu$1$2.class" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.gradle/5.4.1/executionHistory/executionHistory.bin" beforeDir="false" afterPath="$PROJECT_DIR$/.gradle/5.4.1/executionHistory/executionHistory.bin" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.gradle/5.4.1/executionHistory/executionHistory.lock" beforeDir="false" afterPath="$PROJECT_DIR$/.gradle/5.4.1/executionHistory/executionHistory.lock" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.gradle/5.4.1/fileHashes/fileHashes.bin" beforeDir="false" afterPath="$PROJECT_DIR$/.gradle/5.4.1/fileHashes/fileHashes.bin" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.gradle/5.4.1/fileHashes/fileHashes.lock" beforeDir="false" afterPath="$PROJECT_DIR$/.gradle/5.4.1/fileHashes/fileHashes.lock" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.gradle/5.4.1/fileHashes/resourceHashesCache.bin" beforeDir="false" afterPath="$PROJECT_DIR$/.gradle/5.4.1/fileHashes/resourceHashesCache.bin" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.gradle/5.4.1/javaCompile/classAnalysis.bin" beforeDir="false" afterPath="$PROJECT_DIR$/.gradle/5.4.1/javaCompile/classAnalysis.bin" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/.gradle/5.4.1/javaCompile/jarAnalysis.bin" beforeDir="false" afterPath="$PROJECT_DIR$/.gradle/5.4.1/javaCompile/jarAnalysis.bin" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.gradle/5.4.1/javaCompile/javaCompile.lock" beforeDir="false" afterPath="$PROJECT_DIR$/.gradle/5.4.1/javaCompile/javaCompile.lock" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/.gradle/5.4.1/javaCompile/taskHistory.bin" beforeDir="false" afterPath="$PROJECT_DIR$/.gradle/5.4.1/javaCompile/taskHistory.bin" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.gradle/buildOutputCleanup/buildOutputCleanup.lock" beforeDir="false" afterPath="$PROJECT_DIR$/.gradle/buildOutputCleanup/buildOutputCleanup.lock" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/.idea/compiler.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/compiler.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/.idea/misc.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/misc.xml" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/CrazyPutting.class" beforeDir="false" afterPath="$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/CrazyPutting.class" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/objects/Ball.class" beforeDir="false" afterPath="$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/objects/Ball.class" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/objects/Terrain.class" beforeDir="false" afterPath="$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/objects/Terrain.class" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/physicsengine/Physics.class" beforeDir="false" afterPath="$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/physicsengine/Physics.class" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/player/AI/AI.class" beforeDir="false" afterPath="$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/player/AI/AI.class" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/player/astar/AStar.class" beforeDir="false" afterPath="$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/player/astar/AStar.class" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/player/astar/Node.class" beforeDir="false" afterPath="$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/player/astar/Node.class" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/states/menus/CreatorMenu$1.class" beforeDir="false" afterPath="$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/states/menus/CreatorMenu$1.class" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/states/menus/CreatorMenu.class" beforeDir="false" afterPath="$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/states/menus/CreatorMenu.class" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/threedimensional/ThreeDimensionalModel.class" beforeDir="false" afterPath="$PROJECT_DIR$/core/build/classes/java/main/com/crazyputting/threedimensional/ThreeDimensionalModel.class" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/core/build/libs/core-1.0.jar" beforeDir="false" afterPath="$PROJECT_DIR$/core/build/libs/core-1.0.jar" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/core/src/com/crazyputting/states/menus/CreatorMenu.java" beforeDir="false" afterPath="$PROJECT_DIR$/core/src/com/crazyputting/states/menus/CreatorMenu.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/core/src/com/crazyputting/objects/Ball.java" beforeDir="false" afterPath="$PROJECT_DIR$/core/src/com/crazyputting/objects/Ball.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/core/src/com/crazyputting/physicsengine/Physics.java" beforeDir="false" afterPath="$PROJECT_DIR$/core/src/com/crazyputting/physicsengine/Physics.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/core/src/com/crazyputting/states/gamestates/ThreeDimensional.java" beforeDir="false" afterPath="$PROJECT_DIR$/core/src/com/crazyputting/states/gamestates/ThreeDimensional.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/core/src/com/crazyputting/threedimensional/ThreeDimensionalModel.java" beforeDir="false" afterPath="$PROJECT_DIR$/core/src/com/crazyputting/threedimensional/ThreeDimensionalModel.java" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
@@ -177,6 +168,7 @@
       <workItem from="1592500020216" duration="8709000" />
       <workItem from="1592517303675" duration="1355000" />
       <workItem from="1592583209124" duration="2710000" />
+      <workItem from="1592589742204" duration="3893000" />
     </task>
     <task id="LOCAL-00001" summary="Vector3 for treeCoordinates and collider improvement">
       <created>1592131218032</created>
@@ -333,26 +325,26 @@
       <screen x="0" y="0" width="1536" height="824" />
     </state>
     <state x="549" y="168" key="FileChooserDialogImpl/0.0.1536.824@0.0.1536.824" timestamp="1591555636999" />
-    <state width="1877" height="236" key="GridCell.Tab.0.bottom" timestamp="1592585918766">
+    <state width="1877" height="236" key="GridCell.Tab.0.bottom" timestamp="1592593580070">
       <screen x="0" y="0" width="1920" height="1040" />
     </state>
     <state width="1493" height="210" key="GridCell.Tab.0.bottom/0.0.1536.824@0.0.1536.824" timestamp="1592518658895" />
-    <state width="1877" height="236" key="GridCell.Tab.0.bottom/0.0.1920.1040@0.0.1920.1040" timestamp="1592585918766" />
-    <state width="1877" height="236" key="GridCell.Tab.0.center" timestamp="1592585918766">
+    <state width="1877" height="236" key="GridCell.Tab.0.bottom/0.0.1920.1040@0.0.1920.1040" timestamp="1592593580070" />
+    <state width="1877" height="236" key="GridCell.Tab.0.center" timestamp="1592593580070">
       <screen x="0" y="0" width="1920" height="1040" />
     </state>
     <state width="1493" height="210" key="GridCell.Tab.0.center/0.0.1536.824@0.0.1536.824" timestamp="1592518658894" />
-    <state width="1877" height="236" key="GridCell.Tab.0.center/0.0.1920.1040@0.0.1920.1040" timestamp="1592585918766" />
-    <state width="1877" height="236" key="GridCell.Tab.0.left" timestamp="1592585918766">
+    <state width="1877" height="236" key="GridCell.Tab.0.center/0.0.1920.1040@0.0.1920.1040" timestamp="1592593580070" />
+    <state width="1877" height="236" key="GridCell.Tab.0.left" timestamp="1592593580070">
       <screen x="0" y="0" width="1920" height="1040" />
     </state>
     <state width="1493" height="210" key="GridCell.Tab.0.left/0.0.1536.824@0.0.1536.824" timestamp="1592518658894" />
-    <state width="1877" height="236" key="GridCell.Tab.0.left/0.0.1920.1040@0.0.1920.1040" timestamp="1592585918766" />
-    <state width="1877" height="236" key="GridCell.Tab.0.right" timestamp="1592585918766">
+    <state width="1877" height="236" key="GridCell.Tab.0.left/0.0.1920.1040@0.0.1920.1040" timestamp="1592593580070" />
+    <state width="1877" height="236" key="GridCell.Tab.0.right" timestamp="1592593580070">
       <screen x="0" y="0" width="1920" height="1040" />
     </state>
     <state width="1493" height="210" key="GridCell.Tab.0.right/0.0.1536.824@0.0.1536.824" timestamp="1592518658895" />
-    <state width="1877" height="236" key="GridCell.Tab.0.right/0.0.1920.1040@0.0.1920.1040" timestamp="1592585918766" />
+    <state width="1877" height="236" key="GridCell.Tab.0.right/0.0.1920.1040@0.0.1920.1040" timestamp="1592593580070" />
     <state width="1493" height="261" key="GridCell.Tab.1.bottom" timestamp="1592431594192">
       <screen x="0" y="0" width="1536" height="824" />
     </state>
@@ -369,6 +361,10 @@
       <screen x="0" y="0" width="1536" height="824" />
     </state>
     <state width="1493" height="261" key="GridCell.Tab.1.right/0.0.1536.824@0.0.1536.824" timestamp="1592431594192" />
+    <state x="184" y="86" key="MergeDialog" timestamp="1592591304210">
+      <screen x="0" y="0" width="1920" height="1040" />
+    </state>
+    <state x="184" y="86" key="MergeDialog/0.0.1920.1040@0.0.1920.1040" timestamp="1592591304210" />
     <state x="481" y="129" key="MultipleFileMergeDialog" timestamp="1592471588331">
       <screen x="0" y="0" width="1536" height="824" />
     </state>
@@ -382,10 +378,11 @@
       <screen x="0" y="0" width="1536" height="824" />
     </state>
     <state x="465" y="238" key="com.intellij.ide.util.TipDialog/0.0.1536.824@0.0.1536.824" timestamp="1592517310700" />
-    <state x="578" y="330" key="com.intellij.openapi.vcs.update.UpdateOrStatusOptionsDialogupdate-v2" timestamp="1592508664104">
-      <screen x="0" y="0" width="1536" height="824" />
+    <state x="723" y="417" key="com.intellij.openapi.vcs.update.UpdateOrStatusOptionsDialogupdate-v2" timestamp="1592591293374">
+      <screen x="0" y="0" width="1920" height="1040" />
     </state>
     <state x="578" y="330" key="com.intellij.openapi.vcs.update.UpdateOrStatusOptionsDialogupdate-v2/0.0.1536.824@0.0.1536.824" timestamp="1592508664104" />
+    <state x="723" y="417" key="com.intellij.openapi.vcs.update.UpdateOrStatusOptionsDialogupdate-v2/0.0.1920.1040@0.0.1920.1040" timestamp="1592591293374" />
     <state x="499" y="179" key="extract.method.dialog" timestamp="1592146536896">
       <screen x="0" y="0" width="1536" height="824" />
     </state>
Index: core/src/com/crazyputting/threedimensional/ThreeDimensionalModel.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.crazyputting.threedimensional;\r\n\r\nimport com.badlogic.gdx.Gdx;\r\nimport com.badlogic.gdx.assets.loaders.ModelLoader;\r\nimport com.badlogic.gdx.graphics.Texture;\r\nimport com.badlogic.gdx.graphics.VertexAttributes;\r\nimport com.badlogic.gdx.graphics.g3d.Material;\r\nimport com.badlogic.gdx.graphics.g3d.Model;\r\nimport com.badlogic.gdx.graphics.g3d.ModelInstance;\r\nimport com.badlogic.gdx.graphics.g3d.attributes.TextureAttribute;\r\nimport com.badlogic.gdx.graphics.g3d.loader.ObjLoader;\r\nimport com.badlogic.gdx.graphics.g3d.utils.ModelBuilder;\r\nimport com.badlogic.gdx.math.Matrix4;\r\nimport com.badlogic.gdx.math.Quaternion;\r\nimport com.badlogic.gdx.math.Vector3;\r\nimport com.badlogic.gdx.utils.Array;\r\nimport com.crazyputting.objects.Ball;\r\nimport com.crazyputting.objects.Terrain;\r\n\r\nimport java.util.ArrayList;\r\n\r\n\r\npublic class ThreeDimensionalModel {\r\n\r\n    private final int DIV_SIZE = 10;\r\n    private final int CHUNK_SIZE = 5;\r\n    private final ModelLoader loader;\r\n    public Array<HeightField> map;\r\n    private Ball ball;\r\n    private ArrayList<ModelInstance> edges;\r\n    private Terrain terrain;\r\n    private int attr;\r\n    private ModelInstance water;\r\n    private ArrayList<ModelInstance> tree;\r\n    private ArrayList<ModelInstance> rock;\r\n    private ArrayList<ModelInstance> maze;\r\n    private ArrayList<Vector3> treeCoordinates;\r\n    private ArrayList<Vector3> rockCoordinates;\r\n    private ArrayList<Vector3> mazeWallsCoordinates;\r\n\r\n\r\n    public ThreeDimensionalModel(Terrain terrain) {\r\n\r\n        this.terrain = terrain;\r\n        this.ball = terrain.getBall();\r\n\r\n        edges = new ArrayList<>();\r\n        map = new Array<>();\r\n        loader = new ObjLoader();\r\n        tree = new ArrayList<>();\r\n        treeCoordinates = new ArrayList<>();\r\n        rock = new ArrayList<>();\r\n        rockCoordinates = new ArrayList<>();\r\n        maze = new ArrayList<>();\r\n        mazeWallsCoordinates = new ArrayList<>();\r\n\r\n        attr = VertexAttributes.Usage.Position | VertexAttributes.Usage.Normal | VertexAttributes.Usage.TextureCoordinates;\r\n\r\n        createWorld();\r\n    }\r\n\r\n\r\n    private void createWorld() {\r\n        for (int i = 0; i < terrain.getWidth(); i += CHUNK_SIZE) {\r\n            for (int j = 0; j < terrain.getHeight(); j += CHUNK_SIZE) {\r\n                map.add(createField(i, j));\r\n            }\r\n        }\r\n        ModelBuilder modelBuilder = new ModelBuilder();\r\n        float height_border = 20f;\r\n        float width_border = 1f;\r\n\r\n        Model water = modelBuilder.createRect(0, 0, 0, terrain.getWidth(), 0, 0, terrain.getWidth(), terrain.getHeight(), 0,\r\n                0, terrain.getHeight(), 0, 0, 0, 1,\r\n                new Material(TextureAttribute.createDiffuse(new Texture(\"water.png\"))), attr);\r\n        this.water = new ModelInstance(water, 0, 0, -0.12f);\r\n\r\n        Texture wood = new Texture(\"wood.jpg\");\r\n        Model border_w = modelBuilder.createBox(terrain.getWidth() + (2 * width_border), width_border, height_border,\r\n                new Material(TextureAttribute.createDiffuse(wood)), attr);\r\n        edges.add(new ModelInstance(border_w, terrain.getWidth() / 2, -width_border / 2, (-height_border / 2) + 5.5f));\r\n        edges.add(new ModelInstance(border_w, terrain.getWidth() / 2, terrain.getHeight() + width_border / 2, (-height_border / 2) + 5.5f));\r\n\r\n        Model border_d = modelBuilder.createBox(width_border, terrain.getHeight(), height_border,\r\n                new Material(TextureAttribute.createDiffuse(wood)), attr);\r\n        edges.add(new ModelInstance(border_d, -(width_border / 2), terrain.getHeight() / 2, (-height_border / 2) + 5.5f));\r\n        edges.add(new ModelInstance(border_d, terrain.getWidth() + (width_border / 2), terrain.getHeight() / 2, (-height_border / 2) + 5.5f));\r\n\r\n        if (!terrain.getMazeEnabled()) {\r\n            Model treeModel = loader.loadModel(Gdx.files.internal(\"cartontree.obj\"));\r\n            for (int i = 0; i < Math.random() * 10; i++) {\r\n                this.tree.add(new ModelInstance(treeModel));\r\n            }\r\n            for (int i = 0; i < tree.size(); i++) {\r\n                float x = (float) Math.random() * (terrain.getWidth() - 2);\r\n                float y = (float) Math.random() * (terrain.getHeight() - 2);\r\n\r\n                if (terrain.getFunction().evaluateHeight(x, y) >= 0) {\r\n                    treeCoordinates.add(new Vector3(x, y, terrain.getFunction().evaluateHeight(x,y)));\r\n                    tree.get(i).transform = new Matrix4(new Vector3(x, y, terrain.getFunction().evaluateHeight(x, y)), new Quaternion(new Vector3(1, 1, 1), 120),\r\n                            new Vector3(1.65f, 1.65f, 1.65f));\r\n                } else {\r\n                    tree.remove(i);\r\n                    i--;\r\n                }\r\n            }\r\n            terrain.setTreeCoordinates(treeCoordinates);\r\n\r\n            Model rockModel = loader.loadModel(Gdx.files.internal(\"Rock_1.obj\"));\r\n            for (int i = 0; i < Math.random() * 15; i++) {\r\n                this.rock.add(new ModelInstance(rockModel));\r\n            }\r\n            for (int i = 0; i < rock.size(); i++) {\r\n                float x = (float) Math.random() * (terrain.getWidth() - 2);\r\n                float y = (float) Math.random() * (terrain.getHeight() - 2);\r\n\r\n                if (terrain.getFunction().evaluateHeight(x, y) >= 0) {\r\n                    rockCoordinates.add(new Vector3(x, y, terrain.getFunction().evaluateHeight(x,y)));\r\n                    rock.get(i).transform = new Matrix4(new Vector3(x, y, terrain.getFunction().evaluateHeight(x, y)),\r\n                            new Quaternion(new Vector3(0, 0, 1), (int) (Math.random() * 180)),\r\n                            new Vector3(0.5f, 0.5f, 0.5f));\r\n                } else {\r\n                    rock.remove(i);\r\n                    i--;\r\n                }\r\n            }\r\n            terrain.setRockCoordinates(rockCoordinates);\r\n        }\r\n        //Create a maze\r\n        else {\r\n            Texture brick = new Texture(\"brick.jpg\");\r\n            Model wall1 = modelBuilder.createBox(1.4f, 48, 10,\r\n                    new Material(TextureAttribute.createDiffuse(brick)), attr);\r\n            maze.add(new ModelInstance(wall1, 7, 24, 0));\r\n            mazeWallsCoordinates.add(new Vector3(7,24,0));\r\n            maze.add(new ModelInstance(wall1, 14, 26, 0));\r\n            mazeWallsCoordinates.add(new Vector3(14,26,0));\r\n            maze.add(new ModelInstance(wall1, 21, 26, 0));\r\n            mazeWallsCoordinates.add(new Vector3(21,26,0));\r\n            maze.add(new ModelInstance(wall1, 28, 24, 0));\r\n            mazeWallsCoordinates.add(new Vector3(28,24,0));\r\n            maze.add(new ModelInstance(wall1, 35, 26, 0));\r\n            mazeWallsCoordinates.add(new Vector3(35,26,0));\r\n            maze.add(new ModelInstance(wall1, 42, 24, 0));\r\n            mazeWallsCoordinates.add(new Vector3(42,24,0));\r\n            terrain.setMazeWallCoordinates(mazeWallsCoordinates);\r\n        }\r\n\r\n    }\r\n\r\n\r\n    private HeightField createField(int x, int y) {\r\n\r\n        float[] heights = createHeights(x, y);\r\n        HeightField field = new HeightField(true, heights, (CHUNK_SIZE * DIV_SIZE) + 1, (CHUNK_SIZE * DIV_SIZE) + 1, true, attr);\r\n        field.corner00.set(x, y, 0);\r\n        field.corner01.set(x + CHUNK_SIZE, y, 0);\r\n        field.corner10.set(x, y + CHUNK_SIZE, 0);\r\n        field.corner11.set(x + CHUNK_SIZE, y + CHUNK_SIZE, 0);\r\n        field.magnitude.set(0, 0, 1f);\r\n        field.update();\r\n\r\n        return field;\r\n    }\r\n\r\n\r\n    private float[] createHeights(int x0, int y0) {\r\n\r\n        float[] heights = new float[((5 * DIV_SIZE) + 1) * ((5 * DIV_SIZE) + 1)];\r\n        int ih = 0;\r\n        float hole_rad = terrain.getHoleDiameter() / 2;\r\n        final float hole_depth = 3;\r\n        for (float i = 0; i <= 5 * DIV_SIZE; i++) {\r\n            for (float j = 0; j <= 5 * DIV_SIZE; j++) {\r\n                if (terrain.getHole().getPosition().dst(new Vector3(x0 + (i / DIV_SIZE), y0 + (j / DIV_SIZE), 0)) <= hole_rad) {\r\n                    heights[ih] = terrain.getFunction().evaluateHeight(x0 + (i / DIV_SIZE), y0 + (j / DIV_SIZE)) - hole_depth;\r\n                } else heights[ih] = terrain.getFunction().evaluateHeight(x0 + (i / DIV_SIZE), y0 + (j / DIV_SIZE));\r\n                ih++;\r\n            }\r\n        }\r\n        return heights;\r\n    }\r\n\r\n    public ModelInstance getBallModel() {\r\n        return ball.getModel();\r\n    }\r\n\r\n    public ArrayList<ModelInstance> getEdges() {\r\n        return edges;\r\n    }\r\n\r\n    public ModelInstance getWater() {\r\n        return water;\r\n    }\r\n\r\n    public ArrayList<ModelInstance> getTree() {\r\n        return tree;\r\n    }\r\n\r\n    public ArrayList<ModelInstance> getRock() {\r\n        return rock;\r\n    }\r\n\r\n    public ArrayList<ModelInstance> getMaze() {\r\n        return maze;\r\n    }\r\n\r\n}\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- core/src/com/crazyputting/threedimensional/ThreeDimensionalModel.java	(revision ef0d8f90ad98b162e99a3010244df3303d78d727)
+++ core/src/com/crazyputting/threedimensional/ThreeDimensionalModel.java	(date 1592592053373)
@@ -94,14 +94,15 @@
             for (int i = 0; i < tree.size(); i++) {
                 float x = (float) Math.random() * (terrain.getWidth() - 2);
                 float y = (float) Math.random() * (terrain.getHeight() - 2);
-
-                if (terrain.getFunction().evaluateHeight(x, y) >= 0) {
-                    treeCoordinates.add(new Vector3(x, y, terrain.getFunction().evaluateHeight(x,y)));
-                    tree.get(i).transform = new Matrix4(new Vector3(x, y, terrain.getFunction().evaluateHeight(x, y)), new Quaternion(new Vector3(1, 1, 1), 120),
-                            new Vector3(1.65f, 1.65f, 1.65f));
-                } else {
-                    tree.remove(i);
-                    i--;
+                if (ball.getPosition().cpy().x != x || ball.getPosition().cpy().y != y) {
+                    if (terrain.getFunction().evaluateHeight(x, y) >= 0) {
+                        treeCoordinates.add(new Vector3(x, y, terrain.getFunction().evaluateHeight(x, y)));
+                        tree.get(i).transform = new Matrix4(new Vector3(x, y, terrain.getFunction().evaluateHeight(x, y)), new Quaternion(new Vector3(1, 1, 1), 120),
+                                new Vector3(1.65f, 1.65f, 1.65f));
+                    } else {
+                        tree.remove(i);
+                        i--;
+                    }
                 }
             }
             terrain.setTreeCoordinates(treeCoordinates);
@@ -113,15 +114,16 @@
             for (int i = 0; i < rock.size(); i++) {
                 float x = (float) Math.random() * (terrain.getWidth() - 2);
                 float y = (float) Math.random() * (terrain.getHeight() - 2);
-
-                if (terrain.getFunction().evaluateHeight(x, y) >= 0) {
-                    rockCoordinates.add(new Vector3(x, y, terrain.getFunction().evaluateHeight(x,y)));
-                    rock.get(i).transform = new Matrix4(new Vector3(x, y, terrain.getFunction().evaluateHeight(x, y)),
-                            new Quaternion(new Vector3(0, 0, 1), (int) (Math.random() * 180)),
-                            new Vector3(0.5f, 0.5f, 0.5f));
-                } else {
-                    rock.remove(i);
-                    i--;
+                if (ball.getPosition().cpy().x != x || ball.getPosition().cpy().y != y) {
+                    if (terrain.getFunction().evaluateHeight(x, y) >= 0) {
+                        rockCoordinates.add(new Vector3(x, y, terrain.getFunction().evaluateHeight(x, y)));
+                        rock.get(i).transform = new Matrix4(new Vector3(x, y, terrain.getFunction().evaluateHeight(x, y)),
+                                new Quaternion(new Vector3(0, 0, 1), (int) (Math.random() * 180)),
+                                new Vector3(0.5f, 0.5f, 0.5f));
+                    } else {
+                        rock.remove(i);
+                        i--;
+                    }
                 }
             }
             terrain.setRockCoordinates(rockCoordinates);
